
> ClickHouse максимально **эффективно** использует **буфер** ОС (page cache) и **последовательное I/O**, загружая данные **блоками** и **без лишних random‑seek’ов**, что позволяет очень быстро обрабатывать большие объёмы колоночных данных.
## 1. **Системный page cache**
- Когда приложение читает файл с диска, **операционная система** не отдает данные «по байтику» напрямую с железа, а сначала **сохраняет страницы** (обычно по 4 КБ или 8 КБ) в **page cache** — область RAM, которую ОС использует как буфер между диском и приложением.
- При повторном обращении к тем же участкам файла данные уже лежат в памяти и читаются **мгновенно**, без физического обращения к SSD/HDD.
## 2. **Чтение «кусками как есть»**
- ClickHouse при сканировании колонки **не делает кучи мелких чтений** (например, по одной строке или по одному значению), а **запрашивает большие блоки** (десятки–сотни килобайт или больше) за один системный вызов `read()`.
- Эти большие «куски» («chunks» или «blocks») — обычно ровно те же страницы, которые лежат в page cache.
- **Плюсы**:
    - **Меньше системных вызовов** → меньше переключений между пользователем и ядром ОС.
    - **Линейный I/O** (sequential read) максимально эффективен для диска и для операционной системы (она умеет предзагружать следующие страницы)
## 3. *«Не раздербанивая строки»**
- В row‑ориентированных бд при чтении одной строки движок собирает её из разных колонок/файлов — нужно делать **много случайных обращений** по разным местам на диске.
- В ClickHouse же данные одной колонки лежат **непрерывным массивом** в файле. Когда вы хотите прочитать, скажем, столбец `user_id` для 100 000 строк, движок просто читает **один большой участок** файла, не «прыгая» между строками и не собирая их по частям.
- Это и есть «не раздербанивание» — вместо тысяч мелких кусочков и перемещений по файлу ClickHouse читает один цельный фрагмент.
    

